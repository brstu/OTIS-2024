<p align="center"> Министерство образования Республики Беларусь</p>
<p align="center">Учреждение образования</p>
<p align="center">“Брестский Государственный технический университет”</p>
<p align="center">Кафедра ИИТ</p>
<br><br><br><br><br><br><br>
<p align="center">Лабораторная работа №2</p>
<p align="center">По дисциплине “Общая теория интеллектуальных систем”</p>
<p align="center">Тема: “ПИД-регуляторы”</p>
<br><br><br><br><br>
<p align="right">Выполнил:</p>
<p align="right">Студент 2 курса</p>
<p align="right">Группы ИИ-26</p>
<p align="right">Данилюк Т.В.</p>
<p align="right">Проверил:</p>
<p align="right">Ситковец Я. С.</p>
<br><br><br><br><br>
<p align="center">Брест 2024</p>

<hr>

# Общее задание #
1. Написать отчет по выполненной лабораторной работе №1 в .md формате (readme.md) и с помощью запроса на внесение изменений (**pull request**) разместить его в следующем каталоге: **trunk\ii0xxyy\task_02\doc** (где **xx** - номер группы, **yy** - номер студента, например **ii02302**).
2. Исходный код написанной программы разместить в каталоге: **trunk\ii0xxyy\task_02\src**.

# Задание #
Задание. На C++ реализовать программу, моделирующую рассмотренный выше ПИД-регулятор. В качестве объекта управления использовать математическую модель, полученную в предыдущей работе. В отчете также привести графики для разных заданий температуры объекта, пояснить полученные результаты.


<hr>

# Выполнение задания #

Код программы:
```C++
#include <iostream>
#include <vector>
#include <cmath>
#include <iomanip>  // Для форматирования вывода
using namespace std;

// Коэффициенты системы
double coeff_a, coeff_b, coeff_c, coeff_d;
// Параметры системы
double gain, time_const_0, time_delay, time_const, desired_output;
// Параметры регулятора
double reg_0, reg_1, reg_2;

void simulate_system() {
    const double initial_output = 2.0;  // Начальное значение выхода
    double control_signal = 1.0;        // Управляющий сигнал
    vector<double> output = { initial_output };  // Вектор выходных значений
    vector<double> error = { desired_output - initial_output };  // Вектор ошибок
    vector<double> control_history = { control_signal };  // История управляющего сигнала

    // Цикл продолжается, пока ошибка не станет меньше 0.01
    while (fabs(error.back()) > 0.01) {
        // Вычисление новой ошибки
        error.push_back(desired_output - output.back());

        // Вычисление нового управляющего сигнала
        control_signal = control_history.back()
            + reg_0 * error.back()
            + reg_1 * (error.size() > 1 ? error[error.size() - 2] : 0)
            + reg_2 * (error.size() > 2 ? error[error.size() - 3] : 0);

        // Обновление выходного значения системы
        double new_output = coeff_a * output.back()
            - coeff_b * (output.size() > 1 ? output[output.size() - 2] : 0)
            + coeff_c * control_signal
            + coeff_d * sin(control_history.back());

        output.push_back(new_output);  // Добавляем новое значение в вектор выходов
        control_history.push_back(control_signal);  // Сохраняем управляющий сигнал
    }

    // Вывод результатов
    cout << fixed << setprecision(4);  // Форматирование вывода с 4 знаками после запятой
    cout << "Step\tOutput\tError\tControl Signal\n";
    for (size_t i = 0; i < output.size(); ++i) {
        cout << i + 1 << "\t"
            << output[i] << "\t"
            << error[i] << "\t"
            << control_history[i] << endl;
    }
}

int main() {
    // Ввод параметров системы
    setlocale(LC_ALL, "RU");
    cout << "Введите коэффициенты системы:\n";
    cout << "coeff_a: "; cin >> coeff_a;
    cout << "coeff_b: "; cin >> coeff_b;
    cout << "coeff_c: "; cin >> coeff_c;
    cout << "coeff_d: "; cin >> coeff_d;

    cout << "\nВведите параметры системы:\n";
    cout << "gain: "; cin >> gain;
    cout << "time_const_0: "; cin >> time_const_0;
    cout << "time_delay: "; cin >> time_delay;
    cout << "time_const: "; cin >> time_const;
    cout << "desired_output (желаемое значение выхода): "; cin >> desired_output;

    // Расчет параметров регулятора
    reg_0 = gain * (1 + (time_delay / time_const_0));
    reg_1 = -gain * (1 + 2 * (time_delay / time_const_0) - (time_const_0 / time_const));
    reg_2 = gain * (time_delay / time_const_0);

    // Запуск симуляции системы
    simulate_system();

    return 0;
}
'''
Вывод:
'''
Введите коэффициенты системы:
coeff_a: 0.8
coeff_b: 0.4
coeff_c: 0.6
coeff_d: 0.7

Введите параметры системы:
gain: 0.9
time_const_0: 1
time_delay: 1.2
time_const: 1
desired_output (желаемое значение выхода): 20
Step    Output  Error   Control Signal
1       2.0000  18.0000 1.0000
2       0.8450  18.0000 -2.2400
3       9.0751  19.1550 16.2468
4       16.1289 10.9249 15.9434
5       21.5285 3.8711  20.6978
6       24.1097 -1.5285 21.1087
7       23.4893 -4.1097 20.4538
8       22.3099 -3.4893 20.7713
9       20.6872 -2.3099 19.2960
10      19.4219 -0.6872 19.1564
11      19.0485 0.5781  19.2907
12      19.2792 0.9515  19.1838
13      19.5416 0.7208  19.1801
14      19.8838 0.4584  19.5584
15      20.2921 0.1162  19.5768
16      20.2910 -0.2921 19.2425
17      20.0376 -0.2910 19.4227
18      20.0901 -0.0376 19.6614
19      20.1148 -0.0901 19.2499
20      19.8345 -0.1148 19.1765
21      19.8394 0.1655  19.6549
22      20.1373 0.1606  19.4914
23      20.0240 -0.1373 19.0514
24      19.7890 -0.0240 19.4739
25      20.1080 0.2110  19.7953
26      20.1983 -0.1080 19.0998
27      19.7898 -0.1983 19.1683
28      19.9096 0.2102  19.8963
29      20.2620 0.0904  19.4070
30      19.9681 -0.2620 18.9200
31      19.7070 0.0319  19.6468
32      20.2042 0.2930  19.8750
33      20.2024 -0.2042 18.8723
34      19.6336 -0.2024 19.2290
35      19.9879 0.3664  20.1712
36      20.3263 0.0121  19.1851
37      19.8415 -0.3263 18.9086
38      19.7481 0.1585  19.9402
39      20.3293 0.2519  19.7442
40      20.1418 -0.3293 18.7193
41      19.5440 -0.1418 19.4219
42      20.1229 0.4560  20.2755
43      20.3098 -0.1229 18.8940
44      19.6530 -0.3098 19.0385
45      19.8873 0.3470  20.2622
46      20.3806 0.1127  19.4012
47      19.9838 -0.3806 18.7789
48      19.6383 0.0162  19.7549
49      20.2827 0.3617  20.0250
50      20.2377 -0.2827 18.7014
51      19.5130 -0.2377 19.2321
52      20.0193 0.4870  20.4045
53      20.3447 -0.0193 19.0576
54      19.7783 -0.3447 18.9427
55      19.8132 0.2217  20.1055
56      20.3793 0.1868  19.6242
57      20.0933 -0.3793 18.7090
58      19.5521 -0.0933 19.5455
59      20.1876 0.4479  20.2241
60      20.2865 -0.1876 18.7844
61      19.5723 -0.2865 19.1062
62      19.9425 0.4277  20.3692
63      20.3741 0.0575  19.2499
64      19.9032 -0.3741 18.8469
65      19.7162 0.0968  19.9087
66      20.3365 0.2838  19.8574
67      20.1844 -0.3365 18.6828
68      19.5073 -0.1844 19.3511
69      20.0854 0.4927  20.3614
70      20.3215 -0.0854 18.9289
71      19.6838 -0.3215 19.0089
72      19.8718 0.3162  20.2371
73      20.3887 0.1282  19.4608
74      20.0174 -0.3887 18.7558
75      19.6125 -0.0174 19.6993
76      20.2594 0.3875  20.0844
77      20.2524 -0.2594 18.7149
78      19.5206 -0.2524 19.1941
79      19.9969 0.4794  20.4082
80      20.3530 0.0031  19.1063
'''
![График](./otis.png)